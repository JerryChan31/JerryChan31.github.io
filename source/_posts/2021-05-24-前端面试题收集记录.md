---
layout: post
categories: posts
title: 前端缓存优化
tags: [Network]
date: June 8, 2021
excerpt: "一文吃透缓存"
---

## 前言

什么是缓存？

> 缓存是一种保存资源副本并在下次请求时直接使用该副本的技术。



缓存，是提高前端性能最简单、最直接的手段。缓存的好处不言而喻，它能够减少请求，更多地使用本地的资源，给用户更好的体验的同时，也减轻服务器压力。所以了解缓存、用好缓存，是前端进阶之路绕不开的一步。



开始之前先思考一个问题：为什么我们通常讲的缓存，都是HTTP缓存？

我的答案是，因为HTTP协议是应用层协议。用户的数据以什么样的方式被缓存，缓存以什么样的方式被删除，是由开发者根据应用的需求设计的。而应用层正是与应用直接对接的网络协议层，理所应当地，缓存机制也应该由HTTP协议实现。



下面我们来看HTTP协议中和缓存相关的部分。

## HTTP缓存

[HTTP/1.1](https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)协议中与缓存相关的`header`有12种。



### Pragma

语法：

```http
'Pragma': 'no-cache'
```





与 Cache-Control: no-cache 效果一致。强制要求缓存服务器在返回缓存的版本之前将请求提交到源头服务器进行验证。

> 由于 Pragma 在 HTTP 响应中的行为没有确切规范，所以不能可靠替代 HTTP/1.1 中通用首部 Cache-Control，尽管在请求中，假如 Cache-Control 不存在的话，它的行为与 Cache-Control: no-cache 一致。建议只在需要兼容 HTTP/1.0 客户端的场合下应用 Pragma 首部。



### Expires

语法：

```
Expires: Wed, 21 Oct 2015 07:28:00 GMT
```

`**Expires**` 响应头包含日期/时间， 即在此时候之后，响应过期。

### Cache-Control

